{"version":3,"file":"hooks.js","sources":["../src/state/index.js","../src/event/index.js","../src/effect/index.js"],"sourcesContent":["class StateValue {\r\n    val = null\r\n\r\n    constructor(initialValue) {\r\n        this.val = initialValue\r\n    }\r\n\r\n    get state(){\r\n        return this.val\r\n    }\r\n\r\n    set state(state) {\r\n        if (Object.is(state, this.state)) return\r\n        this.state = state\r\n    }\r\n}\r\n\r\nconst useState = (initialState, onStateChange) => {\r\n    let machine = new StateValue(initialState)\r\n    let sm = new Proxy(machine, {\r\n        get: function(target, prop) {\r\n            return target[prop];\r\n        },\r\n        set: function(target, prop, value) {\r\n            const old = target[prop]\r\n            target[prop] = value;\r\n            if (typeof onStateChange === \"function\") {\r\n                onStateChange({\r\n                    prop,\r\n                    oldVal: old,\r\n                    newVal: value\r\n                })\r\n            }\r\n            return true;\r\n        }\r\n    });\r\n\r\n    const setState = (newState) => {\r\n        if (typeof newState === \"object\") {\r\n            Object.keys(newState).forEach(key => {\r\n                sm[key] = newState[key];\r\n            });\r\n        } else {\r\n            sm.val = newState;\r\n        }\r\n\r\n        return state()\r\n    }\r\n\r\n    const state = () => {\r\n        if (Object.keys(sm).length === 1 && Object.keys(sm)[0] === \"val\") {\r\n            return sm.val\r\n        }\r\n        return sm\r\n    }\r\n\r\n    return [\r\n        state,\r\n        setState\r\n    ]\r\n}\r\n\r\nexport {\r\n    useState\r\n}\r\n","const useEventDefaults = {\r\n    effect: null,\r\n    event: \"load\",\r\n    target: globalThis,\r\n    one: false\r\n}\r\n\r\nconst useEvent = ({effect, event, target, one} = useEventDefaults) => {\r\n    let _target, _event\r\n\r\n    if (!target) {\r\n        _target = globalThis\r\n    } else if (typeof target === \"string\") {\r\n        _target = document.querySelector(target)\r\n    } else if (target instanceof HTMLElement) {\r\n        _target = target\r\n    }\r\n\r\n    _event = !event ? \"load\" : event\r\n\r\n    if (typeof effect !== \"function\") {\r\n        throw Error(`Effect must be a function!`)\r\n    }\r\n\r\n    const listener = (e) => {\r\n        if (one) {\r\n            _target.removeEventListener(_event, listener)\r\n        }\r\n        effect(e)\r\n    }\r\n\r\n    return _target.addEventListener(_event, listener);\r\n}\r\n\r\nexport {\r\n    useEvent\r\n}\r\n","const USE_EFFECT_EVENTS = {\r\n    LOAD: 'load',\r\n    VIEWPORT: 'viewport',\r\n    ATTRIBUTE: 'attribute',\r\n    CHILDREN: 'children',\r\n    DATA: 'data',\r\n}\r\n\r\nconst useEffectDefaults = {\r\n    effect: f => f,\r\n    target: globalThis,\r\n    event: 'load',\r\n    root: null\r\n}\r\n\r\nconst useEffect = ({effect, target, event, root} = useEffectDefaults) => {\r\n    let _target, _event = event.toLowerCase()\r\n\r\n    if (typeof effect !== \"function\") {\r\n        throw Error(`Effect must be a function!`)\r\n    }\r\n\r\n    if (!target) {\r\n        throw Error(`Please specify a target element!`)\r\n    }\r\n\r\n    if (event === USE_EFFECT_EVENTS.LOAD) {\r\n        _target = target;\r\n    } else {\r\n        if (typeof target === \"string\") {\r\n            _target = document.querySelector(target)\r\n        } else if (target instanceof HTMLElement) {\r\n            _target = target\r\n        } else {\r\n            throw Error(`Invalid target element!`)\r\n        }\r\n    }\r\n\r\n    if (_event === USE_EFFECT_EVENTS.LOAD) {\r\n        const el = document.querySelector(_target)\r\n        if (el !== null) {\r\n            effect(el)\r\n        } else {\r\n            const observer = new MutationObserver((mutations, observer) => {\r\n                const el = document.querySelector(_target)\r\n                if (el !== null) {\r\n                    effect(el)\r\n                    observer.disconnect()\r\n                }\r\n            })\r\n            observer.observe(document.body, {\r\n                childList: true,\r\n                subtree: true,\r\n            })\r\n        }\r\n    } else if (_event === USE_EFFECT_EVENTS.VIEWPORT) {\r\n        let _root = root === null ? null : typeof root === \"string\" ? document.querySelector(root) : root\r\n        const observerOptions = {\r\n            root: _root,\r\n            rootMargin: \"0px\",\r\n            threshold: 0.5\r\n        }\r\n        const observer = new IntersectionObserver((entries, observer)=>{\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    effect(_target)\r\n                }\r\n            })\r\n        }, observerOptions)\r\n        observer.observe(_target)\r\n    } else if (_event === USE_EFFECT_EVENTS.ATTRIBUTE) {\r\n        const observer = new MutationObserver((mutations) => {\r\n            for (let mut of mutations) {\r\n                if (mut.target === _target && mut.type === 'attributes') {\r\n                    effect(_target, mut.attributeName, _target.getAttribute(mut.attributeName))\r\n                }\r\n            }\r\n        })\r\n        observer.observe(_target, {\r\n            attributes: true,\r\n        })\r\n    } else if (_event === USE_EFFECT_EVENTS.CHILDREN) {\r\n        const observer = new MutationObserver((mutations) => {\r\n            for (let mut of mutations) {\r\n                if (mut.target === _target && mut.type === 'childList') {\r\n                    effect(_target, mut.addedNodes, mut.removedNodes)\r\n                }\r\n            }\r\n        })\r\n        observer.observe(_target, {\r\n            childList: true,\r\n            subtree: true,\r\n        })\r\n    } else if (_event === USE_EFFECT_EVENTS.DATA) {\r\n        const observer = new MutationObserver((mutations) => {\r\n            for (let mut of mutations) {\r\n                if (mut.target === _target && mut.type === 'characterData') {\r\n                    effect(_target, _target.textContent)\r\n                }\r\n            }\r\n        })\r\n        observer.observe(_target, {\r\n            characterData: true,\r\n        })\r\n    } else {\r\n\r\n    }\r\n}\r\n\r\nexport {\r\n    useEffect,\r\n    USE_EFFECT_EVENTS\r\n}"],"names":[],"mappings":"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"}